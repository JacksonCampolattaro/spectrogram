<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Spectrogram::Audio::System::Event class | Spectrogram</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">Spectrogram</a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="namespaces.html">Namespaces</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="namespaceSpectrogram.html">Spectrogram</a>::<wbr/></span><span class="m-breadcrumb"><a href="namespaceSpectrogram_1_1Audio.html">Audio</a>::<wbr/></span><span class="m-breadcrumb"><a href="namespaceSpectrogram_1_1Audio_1_1System.html">System</a>::<wbr/></span>Event <span class="m-thin">class</span>
        </h1>
        <p>Event-oriented interface for an audio backend, intended to be subclassed.</p>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#base-classes">Base classes</a></li>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
                <li><a href="#pro-methods">Protected functions</a></li>
                <li><a href="#pri-methods">Private functions</a></li>
              </ul>
            </li>
          </ul>
        </div>
        <section id="base-classes">
          <h2><a href="#base-classes">Base classes</a></h2>
          <dl class="m-doc">
            <dt>
              class <a href="classSpectrogram_1_1Audio_1_1System_1_1System.html" class="m-doc">System</a>
            </dt>
            <dd>abstract wrapper class that provides simpler syntax when connecting to a backend</dd>
          </dl>
        </section>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper"><a href="#a094354d9a92562d8355eb637aba28950" class="m-doc">Event</a>(</span><span class="m-doc-wrap">std::unique_ptr&lt;<a href="classSpectrogram_1_1Audio_1_1Backend_1_1Backend.html" class="m-doc">Backend::<wbr />Backend</a>&gt; backend) <span class="m-label m-flat m-info">explicit</span> </span>
            </dt>
            <dd>This initializes the backend, as well as the data structures which enable event-driven use.</dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a78e1fbb3cfb02fbc5b342fd7c81ae00b" class="m-doc">start</a>(</span><span class="m-doc-wrap">const <a href="structSpectrogram_1_1Audio_1_1Device.html" class="m-doc">Device</a>&amp; device,
              std::chrono::milliseconds maxLatency,
              size_t bufferLength)</span>
            </dt>
            <dd>Starts the backend, so that data begins to become available.</dd>
          </dl>
        </section>
        <section id="pro-methods">
          <h2><a href="#pro-methods">Protected functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#ab969b3c0439159c32b02898993e3ba1a" class="m-doc">notifyNewData</a>(</span><span class="m-doc-wrap">) <span class="m-label m-flat m-warning">pure virtual</span></span>
            </dt>
            <dd>Invoked whenever new data becomes available (but not necessarily a buffer&#x27;s worth!)</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a9b8b4e45543904119d3a997834f863af" class="m-doc">processNewData</a>(</span><span class="m-doc-wrap">const <a href="namespaceSpectrogram_1_1Audio.html#afe9b618b1a4116382c7ab1c66e3a2afb" class="m-doc">Buffer</a>&amp; buffer) <span class="m-label m-flat m-warning">pure virtual</span></span>
            </dt>
            <dd>Invoked automatically whenever a new buffer is available.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a88e65503ed31778c03e0bf6553a0b7f5" class="m-doc">checkForNewData</a>(</span><span class="m-doc-wrap">) <span class="m-label m-flat m-warning">virtual</span></span>
            </dt>
            <dd>Determines whether a buffer&#x27;s worth of new samples is available, and processes it if necessary.</dd>
          </dl>
        </section>
        <section id="pri-methods">
          <h2><a href="#pri-methods">Private functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a47960c2bc81c4bc71ff4a53d7932037f" class="m-doc">pushSamples</a>(</span><span class="m-doc-wrap">const std::vector&lt;<a href="namespaceSpectrogram_1_1Audio.html#abccb9ac41f25f5747cc0e1efcb4c3871" class="m-doc">Sample</a>&gt;* array) <span class="m-label m-flat m-warning">override</span></span>
            </dt>
            <dd>Callback for processing new samples.</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="a094354d9a92562d8355eb637aba28950"><div>
            <h3>
              <span class="m-doc-wrap-bumper"> Spectrogram::<wbr />Audio::<wbr />System::<wbr />Event::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a094354d9a92562d8355eb637aba28950" class="m-doc-self">Event</a>(</span><span class="m-doc-wrap">std::unique_ptr&lt;<a href="classSpectrogram_1_1Audio_1_1Backend_1_1Backend.html" class="m-doc">Backend::<wbr />Backend</a>&gt; backend) <span class="m-label m-info">explicit</span> </span></span>
            </h3>
            <p>This initializes the backend, as well as the data structures which enable event-driven use.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">backend</td>
                  <td>The audio backend to be used</td>
                </tr>
              </tbody>
            </table>
<p>Make sure to extend this constructor when you subclass this!</p>
          </div></section>
          <section class="m-doc-details" id="a78e1fbb3cfb02fbc5b342fd7c81ae00b"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void Spectrogram::<wbr />Audio::<wbr />System::<wbr />Event::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a78e1fbb3cfb02fbc5b342fd7c81ae00b" class="m-doc-self">start</a>(</span><span class="m-doc-wrap">const <a href="structSpectrogram_1_1Audio_1_1Device.html" class="m-doc">Device</a>&amp; device,
              std::chrono::milliseconds maxLatency,
              size_t bufferLength)</span></span>
            </h3>
            <p>Starts the backend, so that data begins to become available.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">device</td>
                  <td>The device to listen to</td>
                </tr>
                <tr>
                  <td>maxLatency</td>
                  <td>The maximum allowable latency (time) before loss of data should occur</td>
                </tr>
                <tr>
                  <td>bufferLength</td>
                  <td>The length of the buffer which should be produced</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-doc-details" id="ab969b3c0439159c32b02898993e3ba1a"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void Spectrogram::<wbr />Audio::<wbr />System::<wbr />Event::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ab969b3c0439159c32b02898993e3ba1a" class="m-doc-self">notifyNewData</a>(</span><span class="m-doc-wrap">) <span class="m-label m-warning">pure virtual</span> <span class="m-label m-warning">protected</span></span></span>
            </h3>
            <p>Invoked whenever new data becomes available (but not necessarily a buffer&#x27;s worth!)</p>
<p>You should subclass this, and use it to send a signal connected to <a href="classSpectrogram_1_1Audio_1_1System_1_1Event.html#a88e65503ed31778c03e0bf6553a0b7f5" class="m-doc">checkForNewData()</a>. Keep in mind that everything you put in here is subject to a real-time constraint. That means that you&#x27;ll have to think carefully about the type of signal you use!</p>
          </div></section>
          <section class="m-doc-details" id="a9b8b4e45543904119d3a997834f863af"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void Spectrogram::<wbr />Audio::<wbr />System::<wbr />Event::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a9b8b4e45543904119d3a997834f863af" class="m-doc-self">processNewData</a>(</span><span class="m-doc-wrap">const <a href="namespaceSpectrogram_1_1Audio.html#afe9b618b1a4116382c7ab1c66e3a2afb" class="m-doc">Buffer</a>&amp; buffer) <span class="m-label m-warning">pure virtual</span> <span class="m-label m-warning">protected</span></span></span>
            </h3>
            <p>Invoked automatically whenever a new buffer is available.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">buffer</td>
                  <td>the newly available buffer</td>
                </tr>
              </tbody>
            </table>
<p>You should subclass this and use it to trigger actions when new buffers are available. Code in here is run in the main event loop of your system of choice, which means it&#x27;s not subject to a real-time constraint, but speed still matters!</p><p>Though it&#x27;s technically possible, I don&#x27;t recommend putting visualization code inside this function. It&#x27;s better for this to simply emit a signal containing the buffer. Then your visualization system can have a slot that lets it update every time a new buffer is ready!</p>
          </div></section>
          <section class="m-doc-details" id="a88e65503ed31778c03e0bf6553a0b7f5"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void Spectrogram::<wbr />Audio::<wbr />System::<wbr />Event::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a88e65503ed31778c03e0bf6553a0b7f5" class="m-doc-self">checkForNewData</a>(</span><span class="m-doc-wrap">) <span class="m-label m-warning">virtual</span> <span class="m-label m-warning">protected</span></span></span>
            </h3>
            <p>Determines whether a buffer&#x27;s worth of new samples is available, and processes it if necessary.</p>
<p>You should hook a cross-thread signal up to this.</p>
          </div></section>
          <section class="m-doc-details" id="a47960c2bc81c4bc71ff4a53d7932037f"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void Spectrogram::<wbr />Audio::<wbr />System::<wbr />Event::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a47960c2bc81c4bc71ff4a53d7932037f" class="m-doc-self">pushSamples</a>(</span><span class="m-doc-wrap">const std::vector&lt;<a href="namespaceSpectrogram_1_1Audio.html#abccb9ac41f25f5747cc0e1efcb4c3871" class="m-doc">Sample</a>&gt;* array) <span class="m-label m-warning">override</span> <span class="m-label m-danger">private</span></span></span>
            </h3>
            <p>Callback for processing new samples.</p>
<p>This function is provided to the backend as an std::function and called whenever new data is available. When you subclass the <a href="classSpectrogram_1_1Audio_1_1System_1_1System.html" class="m-doc">System</a> class, override this to do what you&#x27;d like with the samples.</p>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v1.js"></script>
<script src="searchdata-v1.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Spectrogram. Created with <a href="https://doxygen.org/">Doxygen</a> 1.8.13 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
